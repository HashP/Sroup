<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cj.sroup.dao.M_rollbookDao">
	
	<select id="getSchedulesByStudyno" parameterType="int" resultType="String">
		SELECT 
			TO_CHAR(EVENT_START, 'yyyy-mm-dd')
		FROM 
			S_CALENDAR
		WHERE 
			STUDY_NO = #{value}
			and
			EVENT_START &lt; sysdate
		ORDER BY EVENT_START desc
	</select>
	
	<select id="getMembersByStudyno" parameterType="int" resultType="UserInfo">
		SELECT 
			USER_ID as id, 
			(select user_name 
			 from user_info 
			 where user_id = STUDY_MANAGEMENT.user_id) as name
		FROM STUDY_MANAGEMENT
		WHERE STUDY_NO = #{value}
		order by name asc
	</select>
	
</mapper>